var trigger=[],showLevel=0;$.get("layer.txt",function(e){var t=[],r={};t=e.split("\n");var a=t[0].split(",");r[0]=parseInt(a[0]),$("span.step").text(a[1]),""!=a[2]?$("a.query").attr("href",a[2]):$("a.query").hide(),""!=a[3]?$("a.codelink").attr("href",a[3]):$("a.codelink").hide(),$("#0").addClass("0level");for(var s=1;s<t.length;s++){a=t[s].split(",");var n=$("#0").clone();if(n.removeAttr("id").removeClass("0level"),n.addClass(a[0]+"level"),r[s]=parseInt(a[0]),n.find("span.step").text(a[1]),""!=a[2]&&n.find("a.query").show().attr("href",a[2]),""!=a[3]&&n.find("a.codelink").show().attr("href",a[3]),a[0]>"0"){var l=20*parseInt(a[0]);n.css("margin-left",l+"px"),n.css("display","none")}$(".task-layer").append(n)}var l=r[0];for(var i in r)r[i]==l+1&&trigger.push(i-1),l=r[i];for(var s=0;s<trigger.length;s++)$("p.steps").eq(trigger[s]).addClass("trigger")}),$(document).on("click",".trigger",function(){var e=parseInt($(this).attr("class").substring(6,7),10),t=e+1,r=t+"level",a={};if(a=$(this).nextUntil("p:not(."+r+")"),"none"==a.css("display"))a.show();else{for(;a.hasClass("trigger");){a.hide();var s=a.length,n=$(a[s-1]);t++,r=t+"level",a=n.nextUntil("p:not(."+r+")")}a.hide()}});