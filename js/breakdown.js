var trigger=[],showLevel=0;$.get("layer.txt",function(e){var t=[],r={};t=e.split("\n");var s=t[0].split(",");r[0]=parseInt(s[0]),$("span.step").text(s[1]),console.log(s),""!=s[2]?($("a.query").attr("href",s[2]),console.log(s[2])):$("a.query").hide(),""!=s[3]?$("a.codelink").attr("href",s[3]):$("a.codelink").hide(),$("#0").addClass("0level");for(var a=1;a<t.length;a++){s=t[a].split(",");var n=$("#0").clone();if(n.removeAttr("id"),n.addClass(s[0]+"level"),r[a]=parseInt(s[0]),n.find("span.step").text(s[1]),""!=s[2]&&n.find("a.query").show().attr("href",s[2]),""!=s[3]&&n.find("a.codelink").show().attr("href",s[3]),s[0]>"0"){var l=20*parseInt(s[0]);n.css("margin-left",l+"px"),n.css("display","none")}$(".task-layer").append(n)}var l=r[0];for(var i in r)r[i]==l+1&&trigger.push(i-1),l=r[i];for(var a=0;a<trigger.length;a++)$("p.steps").eq(trigger[a]).addClass("trigger")}),$(document).on("click",".trigger",function(){var e=parseInt($(this).attr("class").substring(6,7),10),t=e+1,r=t+"level",s={};if(s=$(this).nextUntil("p:not(."+r+")"),"none"==s.css("display"))s.show();else{for(;s.hasClass("trigger");){s.hide();var a=s.length,n=$(s[a-1]);t++,r=t+"level",s=n.nextUntil("p:not(."+r+")")}s.hide()}});